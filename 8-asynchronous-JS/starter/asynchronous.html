<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Asynchronous JavaScript</title>
</head>
<body>
    <h1>Asynchronous JavaScript</h1>
    <script>
    //     function getRecipe() {
    //         setTimeout(()=> {
    //             const recipeId = [ 444, 222, 333, 222]
    //             console.log(recipeId)

    //             setTimeout(id => {
    //                 const recipe = {title: 'Fresh Tomato Pasta', publisher: 'Jonas'}
    //                 console.log(`${id}: ${recipe.title}`)

    //                 setTimeout(publisher => {
    //                     const recipe = {title: 'Pizza', publisher: 'Mike'}
    //                     console.log(recipe)
    //                 }, 1500, recipe.publisher)

    //             }, 1500, recipeId[2])

    //         }, 1500)
    //     }

    //    getRecipe()

    // const getIds = new Promise((resolve, reject) => {
    //     setTimeout(() => {
    //         resolve([444, 222, 333, 222])
    //     }, 1500)
    // })

    // const getRecipe = recId => {
    //     return new Promise((resolve, reject) => {
    //         setTimeout(id => {
    //             const recipe = {title: 'Fresh Tomato Pasta', publisher: 'Jonas'}
    //             resolve(`${id}: ${recipe.title}`)
    //         }, 1500, recId)
    //     })
    // }

    // const getRelated = publisher => {
    //     return new Promise((resolve, reject) => {
    //         setTimeout(pub => {
    //             const recipe = {title: 'Pizza', publisher: 'Mike'}
    //             resolve(`${pub}: ${recipe.title}`)
    //         }, 1500, publisher)
    //     })
    // }

    // getIds
    // .then(ids => {
    //     console.log(ids)
    //     return getRecipe(ids[2])
    // })
    // .then(recipe => {
    //     console.log(recipe)
    //     return getRelated('Jonas')
    // })
    // .then(recipe => console.log(recipe))
    // .catch(error => console.log('Error!'))

    // async function getRecipesAW() {
    //     const ids = await getIds
    //     console.log(ids)
    //     const recipe = await getRecipe(ids[2])
    //     console.log(recipe)
    //     const related = await getRelated('Jonas')
    //     console.log(related)

    //     return recipe
    // }

    // getRecipesAW().then(res => console.log(`${res} is best`))

    // const getWeather = (woeid) => {
    //     fetch(`https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/${woeid}/`)
    //         .then(response => response.json())
    //         .then(response => {
    //             const today = response.consolidated_weather[0]
    //             console.log(`Temperatures in ${response.title} stay between ${today.min_temp} and ${today.max_temp}`)
    //         })
    //         .catch(error => console.log(error))
    // }

    // getWeather(2391279)


    async function getWeatherAW(woeid) {
        try {
            let response = await fetch(`https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/${woeid}/`)
            response = await response.json()
            const today = response.consolidated_weather[1]
            console.log(`Temperatures in ${response.title} stay between ${today.min_temp} and ${today.max_temp}`)
            return response
        } catch (error) {
            console.log(error)
        }

    }

    getWeatherAW(2391279)



    </script>
</body>
</html>